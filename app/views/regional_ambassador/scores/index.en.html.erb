<h1 class="appy-title">
  Regional Scores
</h1>

<label>
  Sort all results by:
  <%= select_tag :sort,
    options_for_select([["Team name", "team_name"],
                        ["Average score ascending", "avg_score_asc"],
                        ["Average score descending", "avg_score_desc"]],
                       params.fetch(:sort) { "team_name" }),
    data: { reload: true } %>
</label>

<div id="ra-scores-index" class="tabs">
  <ul class="tab-menu">
    <li class="tab-link">
      <button
        role="button"
        class="tab-button"
        data-tab-id="ra-event-virtual">
        Virtual Judging
      </button>
    </li>

    <% @events.each do |event| %>
      <li class="tab-link">
        <button
          role="button"
          class="tab-button"
          data-tab-id="ra-event-<%= event.id %>">
          <%= event.name %>
        </button>
      </li>
    <% end %>
  </ul>

  <div class="content">
    <div class="flex-row tab-content" id="ra-event-virtual" style="background: white;">
      <%= render 'regional_ambassador/scores/divisions', event: @virtual_event %>

      <div class="flex-col-md-10 content">
        <div class="tab-content" id="ra-event-virtual-senior">
          <%= render 'regional_ambassador/scores/list',
            event: @virtual_event,
            division: :senior,
            teams: @virtual_senior_teams %>
        </div>

        <div class="tab-content" id="ra-event-virtual-junior">
          <%= render 'regional_ambassador/scores/list',
            event: @virtual_event,
            division: :junior,
            teams: @virtual_junior_teams %>
        </div>
      </div>
    </div>

    <% @events.each do |event| %>
      <div class="flex-row tab-content" id="ra-event-<%= event.id %>" style="background: white;">
        <%= render 'regional_ambassador/scores/divisions', event: event %>

        <div class="flex-col-md-10 content">
          <% if event.divisions.include?(Division.senior) %>
            <div class="tab-content" id="ra-event-<%= event.id %>-senior">
              <%= render 'regional_ambassador/scores/list',
                division: :senior,
                event: event %>
            </div>
          <% end %>

          <% if event.divisions.include?(Division.junior) %>
            <div class="tab-content" id="ra-event-<%= event.id %>-junior">
              <%= render 'regional_ambassador/scores/list',
                division: :junior,
                event: event %>
            </div>
          <% end %>
        </div>
      </div>
    <% end %>
  </div>
</div>
