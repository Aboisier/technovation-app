<h1>Team Submissions</h1>

<div class="flex-row">
  <label class="flex-col-md-3">
    Status:
    <%= select_tag :status,
      options_for_select([["All", "all"],
                          ["Complete", "complete"],
                          ["Incomplete", "incomplete"]],
                         params.fetch(:status) { "all" }),
      data: { reload: true } %>
  </label>

  <label class="flex-col-md-3">
    Division:
    <%= select_tag :division,
      options_for_select([['All', 'all'],
                          ['Senior', 'senior'],
                          ['Junior', 'junior']],
                        params.fetch(:division) { "all" }),
      data: { reload: true } %>
  </label>

  <div class="flex-col-md-6">
    <%= form_tag admin_exports_path(params.merge(class: "team_submissions")) do %>
      <%= button_tag "Email CSV to:", class: "appy-button" %>
      <%= text_field_tag :epxort_email, cookies[:export_email], placeholder: "Email" %>
    <% end %>
  </div>
</div>

<table class="ra-participants-list">
  <thead>
    <tr>
      <th>Team Name</th>
      <th>Division</th>
      <th>City</th>
      <th>State/Province</th>
      <th>Status</th>
      <th>Actions</th>
    </tr>
  </thead>

  <tbody>
    <% @team_submissions.sort { |a, b| a.team_name.downcase <=> b.team_name.downcase }.each do |submission| %>
      <% submission.app_name = "(no name yet)" if submission.app_name.blank? %>

      <tr>
        <td><%= submission.team_name %></td>
        <td><%= submission.team_division_name %></td>
        <td><%= submission.team_city %></td>
        <td><%= submission.team_state_province %></td>
        <td><%= submission.status %></td>

        <td>
          <%= link_to "View details", admin_team_submission_path(submission) %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>

<%= render 'admin/team_submissions/footer' %>
