<div class="flex-row">
  <div class="flex-col-md-4">
    <div class="admin-search__filter-options">
      <label class="no-text-transform">
        Search by name or email:
        <%= text_field_tag :text, params[:text], class: "submit-on-enter",
          placeholder: "Press enter after typing",
          data: { param: :text } %>
      </label>

      <label class="no-text-transform">
        Status:
        <%= select_tag :status,
          options_for_select([:pending, :approved, :declined], params[:status]),
          data: {
            reload: true,
            param: :status,
          } %>
      </label>
    </div>
  </div>

  <div class="flex-col-md-8 wrapper__report-column">
    <div class="scrolly-table">
      <div class="scrolly-table__overflow-handler">
        <table>
          <thead>
            <tr>
              <th>Photo</th>
              <th>Name</th>
              <th>Email</th>
              <th>City, State, Country</th>
              <% if "declined" == params[:status] %>
                <th>Spam</th>
              <% end %>
            </tr>
          </thead>

          <tbody>
            <% @regional_ambassadors.each do |ambassador| %>
              <% cache(ambassador) do %>
                <tr>
                  <td>
                    <%= image_tag ambassador.profile_image_url, width: 80, height: 80 %>
                  </td>

                  <td>
                    <%= link_to ambassador.full_name,
                      admin_regional_ambassador_path(ambassador) %>
                  </td>

                  <td><%= ambassador.email %></td>

                  <td><%= ambassador.address_details %></td>

                  <% if "declined" == params[:status] %>
                    <td class="danger notify-banner notify-banner--error">
                      <%= link_to 'Mark spam',
                        admin_regional_ambassador_path(ambassador, status: :spam),
                        data: {
                          method: :put,
                          confirm: "Mark #{ambassador.full_name} as spam?",
                        } %>
                    </td>
                  <% end %>
                </tr>
              <% end %>
            <% end %>
          </tbody>
        </table>
      </div>
    </div>

    <div class="wrapper__report-footer">
      <div class="pagination_info">
        <%= page_entries_info @regional_ambassadors %>
      </div>

      <%= will_paginate @accounts %>

      <label class="no-text-transform per_page">
        Per page:
        <%= select_tag :per_page,
          options_for_select([10, 25, 50, 100], params[:per_page]),
          data: {
            reload: true,
            param: :per_page,
          } %>
      </label>

      <div class="clearfix admin-search__export-options">
        <hr />

        <%= form_tag admin_exports_path(params.merge(class: "regional_ambassador")) do %>
          <%= button_tag "Email CSV Report to:", class: "appy-button" %>
          <%= text_field_tag :export_email,
            cookies[:export_email],
            class: "export-to-email" %>
        <% end %>
      </div>
    </div>
  </div>
</div>
